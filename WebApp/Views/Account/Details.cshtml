@model AccountDetailsViewModel
@{
    ViewData["Title"] = $"{Model.ProfileInfo?.FirstName} {Model.ProfileInfo?.LastName}'s profile";
}

<section id="account-details">
    <div class="container">
        
        <aside>
            <partial name="~/Views/Shared/Partials/_AsidePartial.cshtml" />
            <div class="profile">
                <img src="@Model.ProfileInfo?.ProfileImageUrl" alt="@($"{Model.ProfileInfo?.FirstName} {Model.ProfileInfo?.LastName}")">
                <a class="btn-refresh" href="#"><i class="fa-sharp fa-regular fa-arrows-rotate"></i></a>
                <h5>@($"{Model.ProfileInfo?.FirstName} {Model.ProfileInfo?.LastName}")</h5>
                <p>@Model.ProfileInfo?.Email</p>
            </div>

            <nav>
                <a class="btn-theme-s" asp-controller="Account" asp-action="Details"><i class="fa-regular fa-gear"></i><span>Account Details</span></a>
                <a class="btn-transparent" asp-controller="Account" asp-action="Security"><i class="fa-regular fa-lock"></i><span>Security</span></a>
                <a class="btn-transparent" asp-controller="Account" asp-action="SavedCourses"><i class="fa-regular fa-bookmark"></i><span>Saved Courses</span></a>
                <a class="btn-transparent" asp-controller="Auth" asp-action="SignOut"><i class="fa-solid fa-right-from-bracket"></i><span>Sign Out</span></a>
            </nav>
        </aside>
        <div class="details-preview">
            <partial name="~/Views/Shared/Partials/_StatusMessagePartial.cshtml" />
            <h2>Account Details</h2>
            <form method="post" asp-controller="Account" asp-action="Details" id="infoChanges" class="row g-4" novalidate>
                <h5>Basic Info</h5>
                <div class="col-lg-6">
                    <label class="form-label" asp-for=BasicInfo!.FirstName></label>
                    @if (Model.ProfileInfo!.IsExternalAccount)
                    {
                        <input class="form-control" asp-for="BasicInfo!.FirstName" disabled />
                    }
                    else
                    {
                        <span asp-validation-for="BasicInfo!.FirstName"></span>
                        <input class="form-control" asp-for="BasicInfo!.FirstName" />
                    }
                </div>

                <div class="col-lg-6">
                    <label class="form-label" asp-for=BasicInfo!.LastName></label>
                    @if (Model.ProfileInfo.IsExternalAccount)
                    {
                        <input class="form-control" asp-for="BasicInfo!.LastName" disabled />
                    }
                    else
                    {
                        <span asp-validation-for="BasicInfo!.LastName"></span>
                        <input class="form-control" asp-for="BasicInfo!.LastName" />
                    }
                </div>

                <div class="col-lg-6">
                    <label class="form-label" asp-for=BasicInfo!.Email></label>
                    @if (Model.ProfileInfo.IsExternalAccount)
                    {
                        <input class="form-control" asp-for="BasicInfo!.Email" disabled />
                    }
                    else
                    {
                        <span asp-validation-for="BasicInfo!.Email"></span>
                        <input class="form-control" asp-for="BasicInfo!.Email" />
                    }
                </div>

                <div class="col-lg-6">
                    <label class="form-label" asp-for=BasicInfo!.Phone></label>
                    <span asp-validation-for="BasicInfo!.Phone"></span>
                    <input class="form-control" asp-for="BasicInfo!.Phone" />
                </div>

                <div class="col-12">
                    <label class="form-label" asp-for=BasicInfo!.Biography>Bio <span>(optional)</span></label>
                    <textarea class="form-control" asp-for="BasicInfo!.Biography" cols="30" rows="5"></textarea>
                </div>


                <div class="col-auto">
                    <button type="reset" class="btn-gray">Cancel</button>
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn-theme">Save Changes</button>
                </div>
            </form>

            <form method="post" asp-controller="Account" asp-action="Details" id="addressChanges" class="row g-4" novalidate>
                <h5>Address</h5>
                <div class="col-12">
                    <label class="form-label" asp-for=AddressInfo!.Addressline_1></label>
                    <span asp-validation-for="AddressInfo!.Addressline_1"></span>
                    <input class="form-control" asp-for="AddressInfo!.Addressline_1" />
                </div>

                <div class="col-12">
                    <label class="form-label" asp-for=AddressInfo!.Addressline_2>Address line 2 <span>(optional)</span></label>
                    <span asp-validation-for="AddressInfo!.Addressline_2"></span>
                    <input class="form-control" asp-for="AddressInfo!.Addressline_2" />
                </div>

                <div class="col-lg-6">
                    <label class="form-label" asp-for=AddressInfo!.PostalCode></label>
                    <span asp-validation-for="AddressInfo!.PostalCode"></span>
                    <input class="form-control" asp-for="AddressInfo!.PostalCode" />
                </div>

                <div class="col-lg-6">
                    <label class="form-label" asp-for=AddressInfo!.City></label>
                    <span asp-validation-for="AddressInfo!.City"></span>
                    <input class="form-control" asp-for="AddressInfo!.City" />
                </div>

                <div class="col-auto">
                    <button type="reset" class="btn-gray">Cancel</button>
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn-theme">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</section>


@await Html.PartialAsync("_ValidationScriptPartial")